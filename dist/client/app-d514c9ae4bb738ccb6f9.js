(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{201:function(t,e,n){"use strict";n.r(e);n(86),n(4);var a=n(78),o=n.n(a),s=(n(57),n(32)),i=n.n(s),r=(n(103),n(79)),u=n.n(r),l=(n(107),n(49)),f=n.n(l),c=(n(110),n(80)),d=n.n(c),m=(n(145),n(81)),p=n.n(m),_=(n(148),n(82)),h=n.n(_),v=(n(151),n(31)),b=n.n(v),g=(n(154),n(48)),w=n.n(g),y=(n(157),n(83)),k=n.n(y),$=(n(160),n(84)),x=n.n($),D=n(0),E=n(9),S=n.n(E);n(194);function T(t){return 200===t.status||304===t.status?t.data:{code:0,msg:t.data.msg||t.statusText,data:t.statusText}}function A(t){if(0===t.code)throw i()({message:t.msg,type:"error",duration:2e3}),new Error(t.msg);return t}S.a.defaults.withCredentials=!0,S.a.interceptors.request.use(function(t){return t},function(t){return Promise.reject(t)}),S.a.interceptors.response.use(function(t){return t},function(t){return Promise.resolve(t.response)});var j={get:function(t,e){if(t)return S.a.get("/api/"+t,{params:e,timeout:3e5}).then(T).then(A)},post:function(t,e){if(t)return S()({method:"post",url:"/api/"+t,data:e,timeout:3e5}).then(T).then(A)},delete:function(t,e){if(t)return S.a.delete("/api/"+t,{data:e,timeout:3e5}).then(T).then(A)},put:function(t,e){if(t)return S.a.put("/api/"+t,{data:e,timeout:3e5}).then(T).then(A)}},z={name:"app",data:function(){return{tableData:[],visiable:!1,loading:!0,form:{name:"",address:""}}},mounted:function(){this._refresh()},methods:{_refresh:function(){var t=this;this.loading=!0,j.get("user").then(function(e){t.loading=!1,t.tableData=e.data})},_handleAdd:function(){this.form={},this.visiable=!0},_handleEdit:function(t,e){this.form=e,this.visiable=!0},_handleDelete:function(t,e){var n=this;this.$confirm("此操作将永久删除该会员, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){j.delete("user/".concat(e._id),{_id:e._id}).then(function(t){n.$message({type:"success",message:"删除成功!"}),n._refresh()})})},_postData:function(){var t=this,e=this.form._id?"put":"post",n=this.form._id?"user/".concat(this.form._id):"user",a=this.form._id?"编辑":"添加";j[e](n,this.form).then(function(e){t.$message({type:"success",message:"".concat(a,"成功!")}),t._refresh()})}}},B=n(85),C=Object(B.a)(z,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-button",{attrs:{type:"primary"},on:{click:function(e){t._handleAdd()}}},[t._v("添加")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(e){t._refresh()}}},[t._v("刷新")]),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData}},[n("el-table-column",{attrs:{label:"姓名"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.name))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"地址"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.address))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini"},on:{click:function(n){t._handleEdit(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){t._handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),n("el-dialog",{attrs:{title:"会员信息",visible:t.visiable},on:{"update:visible":function(e){t.visiable=e}}},[n("el-form",{attrs:{model:t.form}},[n("el-form-item",{attrs:{label:"姓名"}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"地址"}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.address,callback:function(e){t.$set(t.form,"address",e)},expression:"form.address"}})],1)],1),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.visiable=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.visiable=!1}},nativeOn:{click:function(e){return t._postData(e)}}},[t._v("确 定")])],1)],1)],1)},[],!1,null,null,null);C.options.__file="App.vue";var J=C.exports;n(197);n(175),D.default.use(x.a),D.default.use(k.a),D.default.use(w.a),D.default.use(b.a),D.default.use(h.a),D.default.use(p.a),D.default.use(d.a),D.default.use(f.a),D.default.use(u.a),D.default.prototype.$message=i.a,D.default.prototype.$confirm=o.a.confirm,new D.default({render:function(t){return t(J)}}).$mount("#app")}},[[201,1,2]]]);
//# sourceMappingURL=app-d514c9ae4bb738ccb6f9.js.map